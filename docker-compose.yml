networks:
  default:
    name: rindexer_default

services:
  rindexer:
    image: ghcr.io/joshstevens19/rindexer
    platform: linux/amd64
    command: |
      start -p /app/project_path all
    environment:
      - PROJECT_PATH
      - DATABASE_URL
    volumes:
      - ${PROJECT_PATH}:/app/project_path
    ports:
      - 3001:3001
    restart: always

  prometheus:
    image: prom/prometheus:latest
    container_name: prometheus
    restart: always
    ports:
      - '9090:9090'
    volumes:
      - ${PROJECT_PATH}:/app/project_path/prometheus
    command:
      - '--config.file=/app/project_path/prometheus/prometheus.yml'
      - '--web.external-url=http://localhost:9090'
